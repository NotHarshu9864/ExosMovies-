<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Doanin | Home</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gradient-to-br from-black via-slate-900 to-blue-950 text-white min-h-screen">

<!-- Header -->
<header class="flex items-center justify-between p-4 bg-black/60 backdrop-blur fixed w-full z-50">
  <button onclick="toggleMenu()" class="text-2xl">☰</button>
  <h1 class="text-xl font-bold text-blue-400">Doanin</h1>
</header>

<!-- Sidebar -->
<div id="menu" class="fixed top-0 left-0 w-64 h-full bg-black/90 p-6 hidden z-50">
  <button onclick="toggleMenu()" class="mb-6 text-xl">✕</button>
  <nav class="space-y-4 text-lg">
    <a href="index.html" class="block hover:text-blue-400">Home</a>
    <a href="about.html" class="block hover:text-blue-400">About</a>
    <a href="#" class="block hover:text-blue-400">Portfolio</a>
  </nav>
</div>

<!-- Main -->
<main class="pt-24 px-6 max-w-7xl mx-auto">

<!-- Search & Filter -->
<div class="flex flex-col md:flex-row gap-4 mb-6">
  <input id="search" placeholder="Search movies..."
    class="w-full md:w-1/2 px-4 py-2 rounded bg-black border border-blue-800 focus:outline-none">
  
  <select id="category"
    class="px-4 py-2 rounded bg-black border border-blue-800">
    <option value="all">All Categories</option>
  </select>
</div>

<!-- Movies Grid -->
<div id="movies" class="grid grid-cols-2 md:grid-cols-4 gap-6"></div>

</main>

<!-- Footer -->
<footer class="text-center py-6 mt-12 text-sm text-gray-400">
  © 2026 Doanin. All rights reserved.
</footer>

<script>
let allMovies = [];

function toggleMenu() {
  document.getElementById('menu').classList.toggle('hidden');
}

fetch('data/movies/data.json')
  .then(res => res.json())
  .then(data => {
    allMovies = data;
    populateCategories(data);
    renderMovies(data);
  });

function populateCategories(data) {
  const select = document.getElementById('category');
  [...new Set(data.map(m => m.category))].forEach(cat => {
    const opt = document.createElement('option');
    opt.value = cat;
    opt.textContent = cat;
    select.appendChild(opt);
  });
}

function renderMovies(data) {
  const container = document.getElementById('movies');
  container.innerHTML = '';
  data.forEach(m => {
    container.innerHTML += `
      <a href="movie.html?id=${m.id}" class="group">
        <div class="bg-black/60 rounded-lg overflow-hidden hover:scale-105 transition">
          <img src="${m.poster}" class="w-full h-56 object-cover">
          <div class="p-3">
            <h3 class="font-semibold group-hover:text-blue-400">${m.title}</h3>
            <p class="text-sm text-gray-400">${m.category}</p>
          </div>
        </div>
      </a>
    `;
  });
}

document.getElementById('search').addEventListener('input', filter);
document.getElementById('category').addEventListener('change', filter);

function filter() {
  const q = search.value.toLowerCase();
  const c = category.value;
  renderMovies(allMovies.filter(m =>
    m.title.toLowerCase().includes(q) &&
    (c === 'all' || m.category === c)
  ));
}
</script>
</body>
</html>