<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Doanin • Movies</title>

<script src="https://cdn.tailwindcss.com"></script>

<style>
  body { -webkit-tap-highlight-color: transparent; }
</style>
</head>

<body class="bg-gradient-to-br from-black via-slate-900 to-blue-950 text-white min-h-screen">

<!-- HEADER -->
<header class="fixed top-0 w-full z-50 bg-black/80 backdrop-blur border-b border-blue-900">
  <div class="flex items-center px-4 py-3">
    <button onclick="toggleMenu()" class="text-2xl mr-4">☰</button>
    <h1 class="text-lg font-extrabold tracking-wide text-blue-400">DOANIN</h1>
  </div>
</header>

<!-- SIDEBAR -->
<div id="menu" class="fixed inset-0 bg-black/95 hidden z-50">
  <div class="p-6">
    <button onclick="toggleMenu()" class="text-xl mb-6">✕</button>
    <nav class="space-y-4 text-lg">
      <a href="index.html" class="block hover:text-blue-400">Home</a>
      <a href="about.html" class="block hover:text-blue-400">About</a>
      <a href="#" class="block hover:text-blue-400">Portfolio</a>
    </nav>
  </div>
</div>

<!-- MAIN -->
<main class="pt-20 px-4 max-w-7xl mx-auto">

  <!-- SEARCH -->
  <input id="search"
    class="w-full mb-4 p-3 rounded-xl bg-black/60 border border-blue-800 focus:ring-2 focus:ring-blue-600 outline-none text-sm"
    placeholder="Search movies..." />

  <!-- CATEGORY DROPDOWN -->
  <div class="relative mb-6">
    <button onclick="toggleCat()"
      class="w-full bg-black/60 border border-blue-800 p-3 rounded-xl flex justify-between items-center text-sm">
      <span id="catText">All Categories</span>
      <span>▼</span>
    </button>

    <div id="catMenu"
      class="absolute w-full mt-1 bg-black border border-blue-800 rounded-xl hidden z-30 overflow-hidden">
    </div>
  </div>

  <!-- MOVIE GRID -->
  <div id="movies"
    class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
  </div>

</main>

<footer class="text-center py-6 text-gray-400 text-xs">
© 2026 Doanin. All rights reserved.
</footer>

<script>
const moviesDiv = document.getElementById('movies');
const searchInput = document.getElementById('search');
const catMenu = document.getElementById('catMenu');
const catText = document.getElementById('catText');

let movies = [];
let activeCat = "all";

function toggleMenu() {
  document.getElementById('menu').classList.toggle('hidden');
}

function toggleCat() {
  catMenu.classList.toggle('hidden');
}

fetch('data/movies/data.json')
.then(res => res.json())
.then(data => {
  movies = data;
  renderCategories();
  renderMovies();
});

function renderCategories() {
  const cats = [...new Set(movies.map(m => m.category))];
  catMenu.innerHTML =
    `<div onclick="setCat('all')" class="px-4 py-3 hover:bg-blue-900 cursor-pointer">
      All Categories
    </div>`;
  cats.forEach(c => {
    catMenu.innerHTML += `
      <div onclick="setCat('${c}')" class="px-4 py-3 hover:bg-blue-900 cursor-pointer">
        ${c}
      </div>`;
  });
}

function setCat(cat) {
  activeCat = cat;
  catText.textContent = cat === "all" ? "All Categories" : cat;
  catMenu.classList.add('hidden');
  renderMovies();
}

searchInput.addEventListener('input', renderMovies);

function renderMovies() {
  const q = searchInput.value.toLowerCase();
  moviesDiv.innerHTML = "";

  movies
    .filter(m =>
      m.title.toLowerCase().includes(q) &&
      (activeCat === "all" || m.category === activeCat)
    )
    .forEach(m => {
      moviesDiv.innerHTML += `
        <a href="movie.html?id=${m.id}" class="group">
          <div class="bg-black/60 rounded-2xl overflow-hidden hover:ring-2 ring-blue-600 transition">
            <img src="${m.poster}"
              class="h-48 w-full object-cover group-hover:scale-105 transition">
            <div class="p-2">
              <h3 class="text-sm font-semibold leading-tight group-hover:text-blue-400">
                ${m.title}
              </h3>
            </div>
          </div>
        </a>`;
    });
}
</script>

</body>
</html>